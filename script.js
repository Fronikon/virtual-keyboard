(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.lang=e,this.keysData=n,this.textArea=o,this.isShift=!1,this.isCaps=!1,this.keyboardElement=null,this.keys=new Map,document.isShift=this.isShift}var n,o;return n=t,o=[{key:"createKeyboard",value:function(){var e=document.createElement("div");return e.classList.add("keyboard"),this.keyboardElement=e,e}},{key:"activateKeyFunction",value:function(e,t){var n=this;function o(e){return e.selectionStart?e.selectionStart:0}function r(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.moveStart("character",t),n.select()}}var i=function(e){var t=n.textArea,i=t.value,a=o(t),s=i.substring(0,a),c=i.substring(a,i.length);a===t.value.length&&(t.scrollTop=t.scrollHeight);var u=s+e+c;t.value=u,r(t,a+e.length)};switch(e.keyCode){case"Backspace":var a=this.textArea.value,s=o(this.textArea);if(this.textArea.focus(),a.length>0&&0!==s){var c=a.substring(0,s-1)+a.substring(s,a.length);this.textArea.value=c,r(this.textArea,s-1)}break;case"Delete":var u=this.textArea.value,d=o(this.textArea);if(this.textArea.focus(),u.length>0&&d!==u.length){var h=u.substring(0,d)+u.substring(d+1,u.length);this.textArea.value=h,r(this.textArea,d)}break;case"Enter":i("\n");break;case"CapsLock":this.isShift=!this.isShift,this.isCaps=!this.isCaps,t.classList.toggle("active_capslock"),this.render();break;case"switchLang":"ru"===this.lang?this.lang="en":this.lang="ru",this.render();break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":i(e.general);break;case"ShiftLeft":case"ShiftRight":case"ControlRight":case"ControlLeft":case"AltLeft":case"AltRight":break;case"Tab":i("  ");break;default:i(e[!0===this.isShift?"shift":"common"][this.lang])}}},{key:"addListener",value:function(){var e=this;this.keyboardElement.addEventListener("click",(function(t){if(t.target.classList.contains("key")){var n=e.keys.get(t.target);e.activateKeyFunction(n,t.target)}})),this.textArea.onkeydown=function(){return!1};var t=new Map;document.addEventListener("keydown",(function(n){t.has(n.code)||("ShiftLeft"!==n.code&&"ShiftRight"!==n.code||(e.isShift=!e.isShift,e.render()),e.keys.forEach((function(e,o){e.keyCode===n.code&&(o.classList.add("active_key"),t.set(n.code,[o,e]))})))})),document.addEventListener("keyup",(function(n){if(t.has("ShiftLeft")&&t.has("AltLeft")&&(e.lang="ru"===e.lang?"en":"ru",e.render()),t.has(n.code)){"ShiftLeft"!==n.code&&"ShiftRight"!==n.code||(e.isShift=!e.isShift,e.render());var o=t.get(n.code);o[0].classList.remove("active_key"),e.activateKeyFunction(o[1],o[0]),t.delete(n.code)}}))}},{key:"createKey",value:function(e){var t,n=this;t=e.general?e.general:this.isShift?e.shift[this.lang]:e.common[this.lang];var o=document.createElement("div");return o.classList.add("key"),"ShiftLeft"!==e.keyCode&&"ShiftRight"!==e.keyCode||o.addEventListener("mousedown",(function(){n.isShift=!n.isShift,n.render(),document.addEventListener("mouseup",(function e(){n.isShift=!n.isShift,n.render(),document.removeEventListener("mouseup",e)}))})),["Tab","CapsLock","ShiftLeft","ControlLeft","AltLeft","Space","AltRight","ControlRight","Delete","Enter","Backspace"].includes(e.keyCode)&&(o.classList.add("general_key"),"Space"===e.keyCode&&o.classList.add("space")),o.textContent=t,this.keys.set(o,e),o}},{key:"addKeys",value:function(){var e=this;this.keysData.forEach((function(t){var n=function(){var e=document.createElement("div");return e.classList.add("keyboard_row"),e}();t.forEach((function(t){var o=e.createKey(t);n.append(o)})),e.keyboardElement.append(n)}))}},{key:"render",value:function(){var e=this;this.keys.forEach((function(t,n){var o,r=n;o=t.general?t.general:t[e.isShift?"shift":"common"][e.lang],r.textContent=o}))}}],o&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();const n=t;var o=localStorage.getItem("lang")||"en",r=function(e,t,n){var o=document.createElement(e);return o.classList.add(t),n&&(o.textContent=n),o},i=r("div","textarea_wraper"),a=r("textarea","textarea"),s=r("div","keyboard_description"),c=r("span","keyboard_control",'Language change: "Shift + Alt"'),u=r("button","button_clear","Clear Textarea"),d=r("span","keyboard_made","Keyboard create for Windows.");document.body.append(i),i.append(a),i.append(s),s.append(c),s.append(u),s.append(d);var h=new n(o,[[{keyCode:"Backquote",common:{en:"`",ru:"ё"},shift:{en:"~",ru:"Ё"}},{keyCode:"Digit1",common:{en:"1",ru:"1"},shift:{en:"!",ru:"!"}},{keyCode:"Digit2",common:{en:"2",ru:"2"},shift:{en:"@",ru:'"'}},{keyCode:"Digit3",common:{en:"3",ru:"3"},shift:{en:"#",ru:"№"}},{keyCode:"Digit4",common:{en:"4",ru:"4"},shift:{en:"$",ru:";"}},{keyCode:"Digit5",common:{en:"5",ru:"5"},shift:{en:"%",ru:"%"}},{keyCode:"Digit6",common:{en:"6",ru:"6"},shift:{en:"^",ru:":"}},{keyCode:"Digit7",common:{en:"7",ru:"7"},shift:{en:"&",ru:"?"}},{keyCode:"Digit8",common:{en:"8",ru:"8"},shift:{en:"*",ru:"*"}},{keyCode:"Digit9",common:{en:"9",ru:"9"},shift:{en:"(",ru:"("}},{keyCode:"Digit0",common:{en:"0",ru:"0"},shift:{en:")",ru:")"}},{keyCode:"Minus",common:{en:"-",ru:"-"},shift:{en:"_",ru:"_"}},{keyCode:"Equal",common:{en:"=",ru:"="},shift:{en:"+",ru:"+"}},{keyCode:"Backspace",general:"⌫"}],[{keyCode:"Tab",general:"↹"},{keyCode:"KeyQ",common:{en:"q",ru:"й"},shift:{en:"Q",ru:"Й"}},{keyCode:"KeyW",common:{en:"w",ru:"ц"},shift:{en:"W",ru:"Ц"}},{keyCode:"KeyE",common:{en:"e",ru:"у"},shift:{en:"E",ru:"У"}},{keyCode:"KeyR",common:{en:"r",ru:"к"},shift:{en:"R",ru:"К"}},{keyCode:"KeyT",common:{en:"t",ru:"е"},shift:{en:"T",ru:"Е"}},{keyCode:"KeyY",common:{en:"y",ru:"н"},shift:{en:"Y",ru:"Н"}},{keyCode:"KeyU",common:{en:"u",ru:"г"},shift:{en:"U",ru:"Г"}},{keyCode:"KeyI",common:{en:"i",ru:"ш"},shift:{en:"I",ru:"Ш"}},{keyCode:"KeyO",common:{en:"o",ru:"щ"},shift:{en:"O",ru:"Щ"}},{keyCode:"KeyP",common:{en:"p",ru:"з"},shift:{en:"P",ru:"З"}},{keyCode:"BracketLeft",common:{en:"[",ru:"х"},shift:{en:"{",ru:"Х"}},{keyCode:"BracketRight",common:{en:"]",ru:"ъ"},shift:{en:"}",ru:"Ъ"}},{keyCode:"Delete",general:"Del"}],[{keyCode:"CapsLock",general:"⇪"},{keyCode:"KeyA",common:{en:"a",ru:"ф"},shift:{en:"A",ru:"Ф"}},{keyCode:"KeyS",common:{en:"s",ru:"ы"},shift:{en:"S",ru:"Ы"}},{keyCode:"KeyD",common:{en:"d",ru:"в"},shift:{en:"D",ru:"В"}},{keyCode:"KeyF",common:{en:"f",ru:"а"},shift:{en:"F",ru:"А"}},{keyCode:"KeyG",common:{en:"g",ru:"п"},shift:{en:"G",ru:"П"}},{keyCode:"KeyH",common:{en:"h",ru:"р"},shift:{en:"H",ru:"Р"}},{keyCode:"KeyJ",common:{en:"j",ru:"о"},shift:{en:"J",ru:"О"}},{keyCode:"KeyK",common:{en:"k",ru:"л"},shift:{en:"K",ru:"Л"}},{keyCode:"KeyL",common:{en:"l",ru:"д"},shift:{en:"L",ru:"Д"}},{keyCode:"Semicolon",common:{en:";",ru:"ж"},shift:{en:":",ru:"Ж"}},{keyCode:"Quote",common:{en:"'",ru:"э"},shift:{en:'"',ru:"Э"}},{keyCode:"Enter",general:"Enter"}],[{keyCode:"ShiftLeft",general:"⇧"},{keyCode:"KeyZ",common:{en:"z",ru:"я"},shift:{en:"Z",ru:"Я"}},{keyCode:"KeyX",common:{en:"x",ru:"ч"},shift:{en:"X",ru:"Ч"}},{keyCode:"KeyC",common:{en:"c",ru:"с"},shift:{en:"C",ru:"С"}},{keyCode:"KeyV",common:{en:"v",ru:"м"},shift:{en:"V",ru:"М"}},{keyCode:"KeyB",common:{en:"b",ru:"и"},shift:{en:"B",ru:"И"}},{keyCode:"KeyN",common:{en:"n",ru:"т"},shift:{en:"N",ru:"Т"}},{keyCode:"KeyM",common:{en:"m",ru:"ь"},shift:{en:"M",ru:"Ь"}},{keyCode:"Comma",common:{en:",",ru:"б"},shift:{en:"<",ru:"Б"}},{keyCode:"Period",common:{en:".",ru:"ю"},shift:{en:">",ru:"Ю"}},{keyCode:"Slash",common:{en:"/",ru:"."},shift:{en:"?",ru:","}},{keyCode:"Backslash",common:{en:"\\",ru:"\\"},shift:{en:"|",ru:"/"}},{keyCode:"ArrowUp",general:"↑"},{keyCode:"ShiftRight",general:"⇧"}],[{keyCode:"ControlLeft",general:"CtrlL"},{keyCode:"AltLeft",general:"AltL"},{keyCode:"switchLang",common:{en:"en",ru:"ru"},shift:{en:"en",ru:"ru"}},{keyCode:"Space",common:{en:" ",ru:" "},shift:{en:" ",ru:" "}},{keyCode:"AltRight",general:"AltR"},{keyCode:"ControlRight",general:"CtrlR"},{keyCode:"ArrowLeft",general:"←"},{keyCode:"ArrowDown",general:"↓"},{keyCode:"ArrowRight",general:"→"}]],a);document.body.append(h.createKeyboard()),h.addListener(),h.addKeys(),u.addEventListener("click",(function(){a.value=""})),window.addEventListener("unload",(function(){localStorage.setItem("lang",h.lang)}))})();
//# sourceMappingURL=script.js.map